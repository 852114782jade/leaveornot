<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=yes">
    <title>åŒ—äº¬èŒåœºç•™å­˜åŠ› Â· æ·±åº¦è§£æç‰ˆ</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        body {
            font-family: 'Segoe UI', Roboto, 'Helvetica Neue', 'PingFang SC', 'Microsoft YaHei', sans-serif;
            background: #f0f5fa;
            padding: 20px 16px 40px;
            color: #1e2b3c;
        }
        .container {
            max-width: 1000px;
            margin: 0 auto;
        }
        header {
            margin-bottom: 28px;
        }
        h1 {
            font-size: 2rem;
            font-weight: 650;
            background: linear-gradient(145deg, #09445e, #1f6182);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 8px;
        }
        .subhead {
            background: #e2edf7;
            border-left: 5px solid #2a7aa2;
            padding: 14px 20px;
            border-radius: 16px;
            font-size: 0.98rem;
            color: #135a7a;
            line-height: 1.6;
        }
        .dimension-card {
            background: white;
            border-radius: 28px;
            padding: 22px 20px;
            margin-bottom: 24px;
            box-shadow: 0 10px 24px rgba(0, 35, 60, 0.06);
            border: 1px solid rgba(70, 130, 180, 0.15);
        }
        .dimension-header {
            display: flex;
            align-items: baseline;
            justify-content: space-between;
            margin-bottom: 18px;
            flex-wrap: wrap;
        }
        .dimension-title {
            font-size: 1.45rem;
            font-weight: 680;
            color: #0e4b6b;
        }
        .dimension-score-badge {
            background: #d7e6f3;
            padding: 6px 18px;
            border-radius: 40px;
            font-weight: 600;
            color: #094867;
            border: 1px solid #b0cde0;
        }
        .dimension-desc {
            font-size: 0.95rem;
            color: #2c5777;
            background: #f0f9ff;
            padding: 10px 18px;
            border-radius: 30px;
            margin-bottom: 15px;
        }
        .question-item {
            margin-bottom: 24px;
            border-bottom: 1px dashed #d2e2ee;
            padding-bottom: 18px;
        }
        .q-text {
            font-weight: 530;
            line-height: 1.5;
            margin-bottom: 12px;
            color: #1e405b;
        }
        .q-options {
            display: flex;
            flex-wrap: wrap;
            gap: 10px 15px;
            align-items: center;
        }
        .option-label {
            display: flex;
            align-items: center;
            gap: 6px;
            background: #f0f6fd;
            padding: 8px 16px;
            border-radius: 40px;
            border: 1px solid #bed6e9;
            cursor: pointer;
            transition: 0.1s;
            font-weight: 500;
        }
        .option-label:hover {
            background: #dbeafe;
            border-color: #6f9ec7;
        }
        input[type="radio"] {
            appearance: none;
            width: 20px;
            height: 20px;
            border: 2px solid #5689b3;
            border-radius: 50%;
            margin: 0;
            cursor: pointer;
        }
        input[type="radio"]:checked {
            border-color: #136b9e;
            background-color: #136b9e;
            box-shadow: inset 0 0 0 4px white;
        }
        .value-hint {
            font-size: 0.85rem;
            color: #54738f;
            margin-left: 5px;
        }
        .btn-group {
            display: flex;
            flex-wrap: wrap;
            gap: 16px;
            margin: 30px 0 25px;
            justify-content: center;
        }
        .btn {
            background: white;
            border: 1px solid #bed0df;
            padding: 14px 38px;
            border-radius: 60px;
            font-size: 1.2rem;
            font-weight: 620;
            color: #1c5a7c;
            cursor: pointer;
            transition: 0.15s;
            box-shadow: 0 4px 10px rgba(0,30,40,0.05);
            min-width: 200px;
        }
        .btn-primary {
            background: #1c6183;
            color: white;
            border: none;
            box-shadow: 0 8px 18px rgba(25, 90, 130, 0.3);
        }
        .btn-primary:hover {
            background: #114d6b;
            transform: scale(0.98);
        }
        .btn-secondary:hover {
            background: #e5f0f9;
        }

        /* ç»“æœåŒºåŸŸï¼ˆè¯¦ç»†ç‰ˆï¼‰ */
        .result-deep {
            background: #1e3344;
            border-radius: 36px;
            padding: 28px 26px;
            color: #edf4fb;
            margin-top: 35px;
            border: 1px solid #3b576b;
        }
        .result-header {
            font-size: 2rem;
            font-weight: 650;
            color: white;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        .total-badge {
            background: #2f516b;
            padding: 10px 25px;
            border-radius: 80px;
            font-size: 1.8rem;
            font-weight: 700;
            color: white;
        }
        .verdict-banner {
            background: #24485e;
            border-radius: 28px;
            padding: 22px;
            margin: 25px 0;
            border-left: 12px solid #71b6e3;
            font-size: 1.15rem;
            line-height: 1.7;
        }
        .dimension-breakdown {
            display: flex;
            flex-direction: column;
            gap: 20px;
            margin: 30px 0 20px;
        }
        .dimension-deep-card {
            background: #253f52;
            border-radius: 24px;
            padding: 18px 22px;
            border: 1px solid #3f637b;
        }
        .dim-deep-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 12px;
            flex-wrap: wrap;
        }
        .dim-deep-name {
            font-size: 1.4rem;
            font-weight: 600;
            color: #c2defa;
        }
        .dim-deep-score {
            background: #173141;
            padding: 5px 18px;
            border-radius: 40px;
            font-weight: 700;
            font-size: 1.3rem;
            color: #bbdef5;
        }
        .dim-summary {
            background: #1b3443;
            padding: 14px 16px;
            border-radius: 18px;
            margin: 10px 0 12px;
            font-style: italic;
            color: #beddf7;
            border-left: 6px solid #5f9fc0;
        }
        .strength-risk-row {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin-top: 15px;
        }
        .strength-box, .risk-box {
            flex: 1 1 250px;
            background: #1e3749;
            border-radius: 20px;
            padding: 14px 18px;
        }
        .strength-title {
            color: #a3d0a0;
            font-weight: 600;
            font-size: 1.1rem;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 6px;
        }
        .risk-title {
            color: #f7b2a1;
            font-weight: 600;
            font-size: 1.1rem;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 6px;
        }
        .item-list {
            list-style: none;
        }
        .item-list li {
            margin-bottom: 12px;
            border-bottom: 1px dashed #3c5d74;
            padding-bottom: 8px;
            font-size: 0.95rem;
            line-height: 1.5;
        }
        .item-list li:last-child {
            border: none;
        }
        .badge-reverse {
            background: #525e6b;
            color: #f0e9d8;
            font-size: 0.75rem;
            border-radius: 30px;
            padding: 2px 10px;
            margin-left: 8px;
        }
        .action-footnote {
            background: #1a3142;
            border-radius: 22px;
            padding: 22px;
            margin-top: 28px;
            border: 1px solid #4a6f89;
            font-size: 1.05rem;
            line-height: 1.7;
        }
        .footnote-meta {
            color: #b2d1ea;
            font-size: 0.9rem;
            margin-top: 20px;
            text-align: right;
        }
        .reset-link {
            color: #c7ddef;
            text-decoration: underline;
            cursor: pointer;
        }
        @media (max-width: 600px) {
            h1 { font-size: 1.8rem; }
            .dim-deep-name { font-size: 1.2rem; }
            .total-badge { font-size: 1.4rem; padding: 6px 18px; }
        }
    </style>
</head>
<body>
<div class="container">
    <header>
        <h1>ğŸ§Š åŒ—äº¬èŒåœºç•™å­˜åŠ› Â· æ·±åº¦æµ‹è¯„</h1>
        <div class="subhead">
            <strong>25ä¸ªå…³é”®æŒ‡æ ‡ Â· äº”ä¸ªç»´åº¦</strong> â€” ç”Ÿå­˜ä¿éšœã€æƒ…ç»ªæ¶ˆè€—ã€èŒä¸šå‘å±•ã€ç”Ÿæ´»å¹³è¡¡ã€å¤–éƒ¨æ¨åŠ›ï¼ˆéƒ¨åˆ†åå‘è®¡åˆ†ï¼‰ã€‚<br>
            å®Œæˆåä½ å°†è·å¾—æ¯ä¸ªç»´åº¦çš„è¯¦ç»†è§£æã€ä¼˜åŠ¿/é£é™©æ¸…å•ï¼Œä»¥åŠé’ˆå¯¹åŒ—äº¬ç¯å¢ƒçš„ç»¼åˆè¡ŒåŠ¨å»ºè®®ã€‚
        </div>
    </header>

    <div id="questionnaire-container"></div>

    <div class="btn-group">
        <button class="btn btn-primary" id="calculateBtn">ğŸ” ç”Ÿæˆæ·±åº¦æŠ¥å‘Š</button>
        <button class="btn btn-secondary" id="clearBtn">âŸ² é‡æ–°å¡«å†™</button>
    </div>

    <!-- æ·±åº¦ç»“æœé¢æ¿ (åˆå§‹éšè—) -->
    <div id="resultDeep" class="result-deep" style="display: none;"></div>
</div>

<script>
(function() {
    // ---------- é¢˜åº“å®šä¹‰ (å®Œæ•´æ–‡æœ¬åŠç»´åº¦) ----------
    const questions = [
        // ç»´åº¦1 (ç”Ÿå­˜ä¿éšœ) 0-4
        { dim: 1, text: 'ç›®å‰çš„ç¨åè–ªèµ„ï¼Œæ‰£é™¤æˆ¿ç§Ÿ/æˆ¿è´·ã€åƒé¥­ã€é€šå‹¤åï¼Œæ¯æœˆèƒ½æœ‰ç¨³å®šçš„ç»“ä½™ã€‚', reverse: false },
        { dim: 1, text: 'å…¬å¸æŒ‰æ—¶è¶³é¢ç¼´çº³äº”é™©ä¸€é‡‘ï¼ˆç‰¹åˆ«æ˜¯å…¬ç§¯é‡‘ï¼‰ï¼Œä¸”æ¯”ä¾‹å°šå¯ï¼Œèƒ½è®©æˆ‘åœ¨ç§Ÿæˆ¿æˆ–æœªæ¥ä¹°æˆ¿æ—¶ç¨å¾®å®‰å¿ƒã€‚', reverse: false },
        { dim: 1, text: 'æˆ‘çš„è–ªèµ„æ°´å¹³åœ¨åŒè¡Œä¸šåŒå²—ä½ä¸­å¤„äºä¸­ä¸Šæ°´å¹³ï¼Œå³ä½¿æœ‰è£å‘˜é£é™©ï¼Œæˆ‘ä¹Ÿèƒ½å‡­å€Ÿè¿™ä»½å±¥å†æ‰¾åˆ°è–ªèµ„ä¸é™çº§çš„å·¥ä½œã€‚', reverse: false },
        { dim: 1, text: 'ç›®å‰çš„å­˜æ¬¾ï¼ˆæˆ–å®¶åº­æ”¯æŒï¼‰è¶³å¤Ÿæˆ‘åœ¨åŒ—äº¬ä¸å·¥ä½œçš„æƒ…å†µä¸‹ï¼Œä½“é¢åœ°ç”Ÿæ´»è‡³å°‘6ä¸ªæœˆã€‚', reverse: false },
        { dim: 1, text: 'å…¬å¸æä¾›çš„å•†ä¸šä¿é™©ã€é¤è¡¥ã€æ‰“è½¦æŠ¥é”€ç­‰ç¦åˆ©ï¼Œç¡®å®å¸®æˆ‘èŠ‚çœäº†ä¸å°‘ç”Ÿæ´»æˆæœ¬ã€‚', reverse: false },
        // ç»´åº¦2 (æƒ…ç»ªæ¶ˆè€—) 5-9
        { dim: 2, text: 'å³ä½¿å·¥ä½œå¾ˆå¿™ï¼Œä¸‹ç­åæˆ–å‘¨æœ«æˆ‘ä¹Ÿèƒ½çœŸæ­£åœ°â€œæ–­è”â€ï¼Œæ¢å¤ç²¾åŠ›ï¼Œè€Œä¸æ˜¯ä¸€æƒ³åˆ°ç¬¬äºŒå¤©è¦ä¸Šç­å°±æ„Ÿåˆ°å¿ƒæ…Œæˆ–æŠ—æ‹’ã€‚', reverse: false },
        { dim: 2, text: 'æˆ‘çš„ç›´å±é¢†å¯¼å…·å¤‡ç®¡ç†èƒ½åŠ›ï¼Œæ²Ÿé€šé¡ºç•…ï¼Œä¸PUAï¼Œä¸ç”©é”…ï¼Œèƒ½ç»™äºˆæˆ‘å…·ä½“çš„æŒ‡å¯¼å’Œæ”¯æŒã€‚', reverse: false },
        { dim: 2, text: 'åŒäº‹ä¹‹é—´å…³ç³»èæ´½ï¼Œæ²¡æœ‰ä¸¥é‡çš„åŠå…¬å®¤æ”¿æ²»ã€æ´¾ç³»æ–—äº‰ï¼Œä¹Ÿä¸éœ€è¦æˆ‘ä¸ºåˆ«äººçš„é”™è¯¯èƒŒé”…ã€‚', reverse: false },
        { dim: 2, text: 'å…¬å¸çš„è€ƒæ ¸æŒ‡æ ‡åˆç†ï¼Œå·¥ä½œå¼ºåº¦ï¼ˆå¦‚åŠ ç­é¢‘ç‡ã€æˆªæ­¢æ—¥æœŸï¼‰åœ¨æˆ‘çš„èº«å¿ƒæ‰¿å—èŒƒå›´ä¹‹å†…ã€‚', reverse: false },
        { dim: 2, text: 'æˆ‘åœ¨å·¥ä½œä¸­æ„Ÿå—åˆ°è¢«å°Šé‡ï¼Œæå‡ºçš„å»ºè®®æˆ–æ„è§èƒ½è¢«å¬è§ï¼Œè€Œä¸æ˜¯è¢«å½“æˆä¸€ä¸ªå¯æœ‰å¯æ— çš„èºä¸é’‰ã€‚', reverse: false },
        // ç»´åº¦3 (èŒä¸šå‘å±•) 10-14
        { dim: 3, text: 'ç›®å‰çš„å·¥ä½œèƒ½è®©æˆ‘æ¥è§¦åˆ°æ ¸å¿ƒä¸šåŠ¡ï¼Œå­¦ä¹ åˆ°æ–°æŠ€èƒ½ï¼Œç®€å†ä¸Šçš„è¿™æ®µç»å†å¯¹æˆ‘æœªæ¥çš„èŒä¸šè·³æ§½éå¸¸æœ‰ä»·å€¼ã€‚', reverse: false },
        { dim: 3, text: 'å…¬å¸å†…éƒ¨æœ‰æ¸…æ™°çš„æ™‹å‡é€šé“ï¼Œä¸”æˆ‘è·ç¦»ä¸‹ä¸€ä¸ªèŒçº§çš„ç›®æ ‡æ˜¯æ¸…æ™°ä¸”å¯è¾¾æˆçš„ã€‚', reverse: false },
        { dim: 3, text: 'å…¬å¸æˆ–è¡Œä¸šæ­£å¤„äºä¸Šå‡æœŸï¼Œæœ‰æ‹¿å¾—å‡ºæ‰‹çš„å¤§å®¢æˆ·ã€å¤§é¡¹ç›®æˆ–ä¸Šå¸‚é¢„æœŸï¼Œæ•´ä½“å‘å±•å‰æ™¯çœ‹å¥½ã€‚', reverse: false },
        { dim: 3, text: 'ç°åœ¨çš„å¹³å°èƒ½ç»™æˆ‘å¸¦æ¥â€œå…‰ç¯æ•ˆåº”â€ï¼ˆå¦‚å¤§å‚èƒŒæ™¯ã€è¡Œä¸šå¤´éƒ¨ï¼‰ï¼Œè®©çŒå¤´æˆ–åŒè¡Œå¯¹æˆ‘é«˜çœ‹ä¸€çœ¼ã€‚', reverse: false },
        { dim: 3, text: 'æˆ‘æ¸…æ¥šè‡ªå·±3-5å¹´åçš„èŒä¸šç›®æ ‡ï¼Œç›®å‰çš„å·¥ä½œæ­£åœ¨æœç€é‚£ä¸ªæ–¹å‘ç§¯ç´¯èµ„æºæˆ–äººè„‰ã€‚', reverse: false },
        // ç»´åº¦4 (ç”Ÿæ´»å¹³è¡¡) 15-19
        { dim: 4, text: 'é€šå‹¤æ—¶é—´åœ¨å¯æ¥å—èŒƒå›´å†…ï¼ˆå•ç¨‹å°‘äº1å°æ—¶ï¼‰ï¼Œä¸éœ€è¦æ¯å¤©èŠ±3-4å°æ—¶åœ¨åœ°é“é‡Œè€—å°½ç²¾åŠ›ã€‚', reverse: false },
        { dim: 4, text: 'æˆ‘æ¯å‘¨è‡³å°‘æœ‰1-2å¤©èƒ½å‡†æ—¶ä¸‹ç­ï¼Œè¿›è¡Œå¥èº«ã€ç¤¾äº¤ã€é˜…è¯»æˆ–çº¯ç²¹çš„å‘å‘†ï¼Œæ‹¥æœ‰å±äºè‡ªå·±çš„ç”Ÿæ´»ã€‚', reverse: false },
        { dim: 4, text: 'èº«ä½“æ²¡æœ‰å› å·¥ä½œå‡ºç°ä¸¥é‡çš„æŠ¥è­¦ä¿¡å·ï¼ˆå¦‚å¤±çœ ã€è„±å‘ã€å†…åˆ†æ³Œå¤±è°ƒã€è…°æ¤ç—…ç­‰ï¼‰ã€‚', reverse: false },
        { dim: 4, text: 'æœ‰è¶³å¤Ÿçš„æ—¶é—´é™ªä¼´å®¶äººã€ä¼´ä¾£æˆ–å® ç‰©ï¼Œäº²å¯†å…³ç³»æ²¡æœ‰å› ä¸ºå·¥ä½œå¿™ç¢Œè€Œå˜å¾—ç–è¿œæˆ–é¢‘ç¹äº‰åµã€‚', reverse: false },
        { dim: 4, text: 'å…¬å¸åœ¨è€ƒå‹¤åˆ¶åº¦ä¸Šç›¸å¯¹çµæ´»ï¼ˆå¦‚å…è®¸å¶å°”è¿Ÿåˆ°ã€å±…å®¶åŠå…¬ã€ä¸å¼ºåˆ¶æ— æ•ˆåŠ ç­ï¼‰ï¼Œèƒ½åº”å¯¹ç”Ÿæ´»ä¸­çš„çªå‘çŠ¶å†µã€‚', reverse: false },
        // ç»´åº¦5 (å¤–éƒ¨æ¨åŠ›) 20-24  æ³¨æ„åå‘é¢˜
        { dim: 5, text: 'ç›®å‰çš„æ‹›è˜å¸‚åœºå¾ˆå†·æ·¡ï¼Œå¦‚æœç°åœ¨ç¦»èŒï¼Œå¤§æ¦‚ç‡å¾ˆéš¾æ‰¾åˆ°æ¯”ç°åœ¨æ›´å¥½çš„å·¥ä½œã€‚', reverse: true },   // åå‘
        { dim: 5, text: 'æˆ‘çš„å­¦å†ã€å¹´é¾„ã€æ€§åˆ«åœ¨å½“å‰å°±ä¸šå¸‚åœºä¸Šä»å…·æœ‰ç«äº‰åŠ›ï¼Œæ²¡æœ‰æ„Ÿå—åˆ°æ˜æ˜¾çš„æ­§è§†æˆ–é—¨æ§›ã€‚', reverse: false },
        { dim: 5, text: 'æˆ‘æœ‰å‰¯ä¸šæˆ–å…¶ä»–è¢«åŠ¨æ”¶å…¥æ¥æºï¼Œå³ä½¿å·¥ä½œä¸é¡ºå¿ƒï¼Œç¦»èŒå¯¹ç»æµçŠ¶å†µçš„å†²å‡»ä¹Ÿä¸å¤§ã€‚', reverse: false },
        { dim: 5, text: 'å®¶äººéå¸¸æ”¯æŒæˆ‘ç»§ç»­ç•™åœ¨è¿™ä¸ªå…¬å¸ï¼Œæ²¡æœ‰å¤©å¤©åŠæˆ‘è¾èŒå›è€å®¶æˆ–è€…æ¢å·¥ä½œã€‚', reverse: false },
        { dim: 5, text: 'åŒ—äº¬çš„è½æˆ·ã€è½¦ç‰Œã€å­å¥³ä¸Šå­¦ç­‰æ”¿ç­–æ€§éœ€æ±‚ï¼Œç›®å‰çš„å·¥ä½œæ˜¯è§£å†³è¿™äº›é—®é¢˜çš„å”¯ä¸€æˆ–æœ€ä½³é€”å¾„ã€‚', reverse: false }
    ];

    const dimNames = ['ç”Ÿå­˜ä¿éšœ', 'æƒ…ç»ªæ¶ˆè€—', 'èŒä¸šå‘å±•', 'ç”Ÿæ´»å¹³è¡¡', 'å¤–éƒ¨æ¨åŠ›'];
    const dimColors = ['#dff0fa', '#ffe9e3', '#def0e6', '#fff9e0', '#f1e4f5'];

    // æ¸²æŸ“é—®å·
    function renderQuestionnaire() {
        const container = document.getElementById('questionnaire-container');
        if (!container) return;
        let html = '';
        for (let d = 1; d <= 5; d++) {
            const dimQuestions = questions.filter(q => q.dim === d);
            html += `<div class="dimension-card" style="background: ${dimColors[d-1]}30; border-left: 5px solid ${dimColors[d-1]}">`;
            html += `<div class="dimension-header">`;
            html += `<span class="dimension-title">ç»´åº¦${d} Â· ${dimNames[d-1]}</span>`;
            html += `<span class="dimension-score-badge" id="dim${d}-live">å¾…è®¡ç®—</span>`;
            html += `</div>`;
            let desc = '';
            if (d === 1) desc = 'ğŸ  ç»æµåº•ç›˜ â€” å‚¨è“„ã€è–ªèµ„ã€ç¦åˆ©';
            if (d === 2) desc = 'ğŸ˜ æƒ…ç»ªæ°›å›´ â€” é¢†å¯¼ã€åŒäº‹ã€å†…è€—';
            if (d === 3) desc = 'ğŸ“Š æœªæ¥èµ„æœ¬ â€” æˆé•¿ã€è¡Œä¸šã€ç®€å†';
            if (d === 4) desc = 'ğŸ§˜ ç”Ÿæ´»ç©ºé—´ â€” é€šå‹¤ã€å¥åº·ã€å®¶åº­';
            if (d === 5) desc = 'â›“ï¸ å¤–éƒ¨æŸç¼š â€” å¸‚åœºã€å‰¯ä¸šã€æˆ·å£ (éƒ¨åˆ†åå‘)';
            html += `<div class="dimension-desc">${desc}</div>`;

            dimQuestions.forEach((q, idx) => {
                const globalIndex = questions.findIndex(item => item === q);
                const name = `q${globalIndex}`;
                html += `<div class="question-item">`;
                html += `<div class="q-text">${globalIndex+1}. ${q.text}</div>`;
                html += `<div class="q-options" id="${name}-group">`;
                for (let v = 1; v <= 5; v++) {
                    html += `<label class="option-label">`;
                    html += `<input type="radio" name="${name}" value="${v}">`;
                    html += `<span>${v}</span>`;
                    html += `</label>`;
                }
                html += `<span class="value-hint">ï¼ˆ1=å®Œå…¨ä¸ç¬¦ 5=å®Œå…¨ç¬¦åˆï¼‰</span>`;
                html += `</div></div>`;
            });
            html += `</div>`;
        }
        container.innerHTML = html;
    }

    // æ¸…ç©º
    function clearAll() {
        const radios = document.querySelectorAll('input[type="radio"]');
        radios.forEach(r => r.checked = false);
        for (let d = 1; d <= 5; d++) {
            const badge = document.getElementById(`dim${d}-live`);
            if (badge) badge.innerText = 'å¾…è®¡ç®—';
        }
        document.getElementById('resultDeep').style.display = 'none';
    }

    // æˆªæ–­æ–‡æœ¬ï¼ˆç”¨äºåˆ—è¡¨æ˜¾ç¤ºï¼‰
    function truncate(txt, len = 22) {
        return txt.length > len ? txt.slice(0, len) + 'â€¦' : txt;
    }

    // ç”Ÿæˆæ·±åº¦æŠ¥å‘Š
    function generateDeepReport() {
        const totalQ = questions.length;
        const rawValues = new Array(totalQ).fill(null);
        let missing = false;

        for (let i = 0; i < totalQ; i++) {
            const radios = document.getElementsByName(`q${i}`);
            let selected = null;
            for (let r of radios) {
                if (r.checked) { selected = parseInt(r.value, 10); break; }
            }
            if (selected === null) {
                missing = true;
                const group = document.getElementById(`q${i}-group`);
                if (group) group.style.backgroundColor = '#ffd9d9';
            } else {
                const group = document.getElementById(`q${i}-group`);
                if (group) group.style.backgroundColor = 'transparent';
                rawValues[i] = selected;
            }
        }
        if (missing) {
            alert('âš ï¸ è¿˜æœ‰é¢˜ç›®æœªå›ç­”ï¼Œè¯·æ£€æŸ¥é«˜äº®åŒºåŸŸ');
            return;
        }

        // è®¡ç®—è°ƒæ•´ååˆ†æ•° åŠ å„ç»´åº¦ç´¯è®¡
        const adjusted = rawValues.map((val, idx) => {
            return questions[idx].reverse ? (6 - val) : val;
        });

        const dimScores = [0,0,0,0,0];
        for (let i = 0; i < totalQ; i++) {
            dimScores[questions[i].dim-1] += adjusted[i];
        }
        const totalScore = dimScores.reduce((a,b) => a+b, 0);

        // æ›´æ–°å°å¾½ç« 
        for (let d = 1; d <= 5; d++) {
            const badge = document.getElementById(`dim${d}-live`);
            if (badge) badge.innerText = `${dimScores[d-1]}/25`;
        }

        // ----- æ„å»ºæ·±åº¦HTML -----
        let deepHtml = '';
        deepHtml += `<div class="result-header">ğŸ“‹ ä½ çš„èŒåœºç•™å­˜åŠ› Â· æ·±åº¦æŠ¥å‘Š</div>`;

        // æ€»åˆ†å¤§æ ‡
        deepHtml += `<div style="display:flex; align-items:center; justify-content:space-between; flex-wrap:wrap; gap:15px;">`;
        deepHtml += `<span class="total-badge">æ€»åˆ† ${totalScore}/125</span>`;
        // åŒºé—´æ ‡ç­¾
        let zone = '';
        if (totalScore >= 100) zone = 'ğŸŸ¢ å®‰å…¨åŒº';
        else if (totalScore >= 80) zone = 'ğŸŸ¡ è§‚æœ›åŒº';
        else if (totalScore >= 60) zone = 'ğŸŸ  é¢„è­¦åŒº';
        else zone = 'ğŸ”´ è­¦æŠ¥åŒº';
        deepHtml += `<span style="background:#152f3f; padding:10px 28px; border-radius:60px; font-size:1.5rem;">${zone}</span>`;
        deepHtml += `</div>`;

        // verdict è¯¦ç»†æ€»ä½“è¯„è¯­
        let verdictMsg = '';
        if (totalScore >= 100) verdictMsg = 'âœ… <strong>ç»¿è‰²å®‰å…¨åŒº Â· å»ºè®®ç•™ä»»</strong> â€” å„é¡¹æŒ‡æ ‡å¥åº·ï¼ŒèŒä¸šå‘å±•ã€æƒ…ç»ªã€ç”Ÿæ´»åŸºæœ¬å¹³è¡¡ã€‚è‹¥æ²¡æœ‰ä¸å¯æŠ—æ‹’å› ç´ ï¼Œç•™ä¸‹æ¥æ·±è€•æ˜¯æ›´ä¼˜é€‰æ‹©ã€‚ä½†éœ€è­¦æƒ•éšæ€§å€¦æ€ ï¼Œå¯å¯»æ±‚å†…éƒ¨çªç ´ã€‚';
        else if (totalScore >= 80) verdictMsg = 'ğŸŸ¡ <strong>é»„è‰²è§‚æœ›åŒº Â· éª‘é©´æ‰¾é©¬</strong> â€” æ•´ä½“å°šå¯ä½†æœ‰æ˜æ˜¾ç—›ç‚¹ï¼ˆå¦‚æŸç»´åº¦åä½ï¼‰ã€‚å»ºè®®æ›´æ–°ç®€å†ï¼Œæ¥è§¦å¤–éƒ¨æœºä¼šï¼Œäº‰å–è–ªèµ„æ¶¨å¹…20%-30%å†è·³ã€‚é¿å…è£¸è¾ã€‚';
        else if (totalScore >= 60) verdictMsg = 'ğŸŸ  <strong>æ©™è‰²é¢„è­¦åŒº Â· å‡†å¤‡æ’¤ç¦»</strong> â€” å·¥ä½œå·²å¼€å§‹æ¶ˆè€—ä½ çš„èº«å¿ƒå¥åº·æˆ–èŒä¸šå‰é€”ã€‚å°¤å…¶æ³¨æ„å¾—åˆ†æœ€ä½çš„ç»´åº¦ï¼Œå»ºè®®3-6ä¸ªæœˆå†…è½å®ä¸‹å®¶ï¼ŒåŒæ—¶å‹ç¼©å¼€æ”¯æ”’å¤Ÿåº”æ€¥é‡‘ã€‚';
        else verdictMsg = 'ğŸ”´ <strong>çº¢è‰²è­¦æŠ¥åŒº Â· æœæ–­æ­¢æŸ</strong> â€” è¿™ä»½å·¥ä½œå¯èƒ½æ­£æŸå®³ä½ çš„å¥åº·æˆ–æœªæ¥ã€‚è‹¥æ²¡æœ‰æˆ·å£ç­‰ç¡¬çº¦æŸï¼Œä¼˜å…ˆè€ƒè™‘è£¸è¾ä¼‘æ•´æˆ–æ¢åŸå¸‚ã€‚èº«å¿ƒå¥åº·æˆæœ¬è¿œé«˜äºå·¥èµ„ã€‚';
        deepHtml += `<div class="verdict-banner">${verdictMsg}</div>`;

        // ç»´åº¦æ·±åº¦è§£æ
        deepHtml += `<h3 style="margin: 20px 0 12px; font-weight:400; opacity:0.9;">ğŸ” å„ç»´åº¦æ·±åº¦æ‹†è§£</h3>`;
        deepHtml += `<div class="dimension-breakdown">`;

        for (let d = 0; d < 5; d++) {
            const dimScore = dimScores[d];
            const dimQIndices = questions.reduce((acc, q, idx) => q.dim === d+1 ? [...acc, idx] : acc, []);
            // æ”¶é›†ä¼˜åŠ¿å’Œé£é™© (åŸºäºè°ƒæ•´ååˆ†æ•°)
            const strengths = [];
            const risks = [];
            dimQIndices.forEach(idx => {
                const adj = adjusted[idx];
                const raw = rawValues[idx];
                const qText = questions[idx].text;
                const isReverse = questions[idx].reverse;
                if (adj >= 4) { // ä¼˜åŠ¿é¡¹
                    strengths.push({ text: qText, raw, isReverse });
                } else if (adj <= 2) { // é£é™©é¡¹
                    risks.push({ text: qText, raw, isReverse });
                }
            });

            // ç»´åº¦æ€»ç»“è¯­å¥
            let dimSummary = '';
            if (dimScore >= 20) dimSummary = 'éå¸¸ç¨³å›ºï¼Œæ˜¯ä½ çš„ä¿æŠ¤å› ç´ ã€‚';
            else if (dimScore >= 15) dimSummary = 'ä¸­ç­‰åä¸Šï¼Œä½†ä»æœ‰æå‡ç©ºé—´ã€‚';
            else if (dimScore >= 10) dimSummary = 'æ˜æ˜¾çŸ­æ¿ï¼Œæ­£åœ¨æ‹‰ä½ä½ çš„ç•™å­˜åŠ›ã€‚';
            else dimSummary = 'ä¸¥é‡å±æœºï¼Œéœ€è¦ä¼˜å…ˆå¹²é¢„ã€‚';

            deepHtml += `<div class="dimension-deep-card">`;
            deepHtml += `<div class="dim-deep-header">`;
            deepHtml += `<span class="dim-deep-name">${dimNames[d]}</span>`;
            deepHtml += `<span class="dim-deep-score">${dimScore}/25</span>`;
            deepHtml += `</div>`;
            deepHtml += `<div class="dim-summary">ğŸ“Œ ç»´åº¦è§£è¯»ï¼š${dimSummary}</div>`;

            deepHtml += `<div class="strength-risk-row">`;
            // ä¼˜åŠ¿åˆ—è¡¨
            deepHtml += `<div class="strength-box">`;
            deepHtml += `<div class="strength-title">âœ¨ ä¼˜åŠ¿é¡¹ (å¾—åˆ†è¾ƒé«˜)</div>`;
            if (strengths.length === 0) deepHtml += `<p style="opacity:0.6;">æ— æ˜¾è‘—ä¼˜åŠ¿ï¼Œæˆ–å„é¡¹å¹³å¹³</p>`;
            else {
                deepHtml += `<ul class="item-list">`;
                strengths.forEach(s => {
                    let revMark = s.isReverse ? `<span class="badge-reverse">åå‘é¢˜ åŸå§‹åˆ†${s.raw}</span>` : '';
                    deepHtml += `<li>${truncate(s.text, 30)}  â€” å¾—åˆ†${s.raw}${revMark}</li>`;
                });
                deepHtml += `</ul>`;
            }
            deepHtml += `</div>`;

            // é£é™©åˆ—è¡¨
            deepHtml += `<div class="risk-box">`;
            deepHtml += `<div class="risk-title">âš ï¸ é£é™©é¡¹ (å¾—åˆ†è¾ƒä½)</div>`;
            if (risks.length === 0) deepHtml += `<p style="opacity:0.6;">æ— æ˜¾è‘—é£é™©ï¼Œä½†éœ€ä¿æŒå…³æ³¨</p>`;
            else {
                deepHtml += `<ul class="item-list">`;
                risks.forEach(r => {
                    let revMark = r.isReverse ? `<span class="badge-reverse">åå‘é¢˜ åŸå§‹åˆ†${r.raw}</span>` : '';
                    deepHtml += `<li>${truncate(r.text, 30)}  â€” å¾—åˆ†${r.raw}${revMark}</li>`;
                });
                deepHtml += `</ul>`;
            }
            deepHtml += `</div>`;
            deepHtml += `</div>`; // .strength-risk-row
            deepHtml += `</div>`; // dimension-deep-card
        }

        deepHtml += `</div>`; // dimension-breakdown

        // ç»¼åˆè¡ŒåŠ¨å»ºè®® (ç»“åˆå„ç»´åº¦æç«¯æƒ…å†µ)
        let actionText = 'ğŸ ç»¼åˆå»ºè®®ï¼š';
        if (dimScores[2] < 10) actionText += 'èŒä¸šå‘å±•å¾—åˆ†æä½ï¼Œç®€å†å¯èƒ½æ­£åœ¨è´¬å€¼ã€‚å°½å¿«å¼€å§‹æŠ•é€’ç®€å†ï¼Œå…³æ³¨æœ‰æ ¸å¿ƒå²—ä½çš„è¡Œä¸šã€‚';
        if (dimScores[1] < 10) actionText += 'æƒ…ç»ªæ¶ˆè€—è¿‡å¤§ï¼Œå†…è€—ä¸¥é‡ï¼Œå¯è€ƒè™‘å¿ƒç†å’¨è¯¢æˆ–ä¼‘å‡ã€‚';
        if (dimScores[0] < 10) actionText += 'ç”Ÿå­˜ä¿éšœè„†å¼±ï¼ŒåŠ¡å¿…åœ¨ç¦»èŒå‰æ”’å¤Ÿ6ä¸ªæœˆåº”æ€¥èµ„é‡‘ã€‚';
        if (dimScores[3] < 10) actionText += 'ç”Ÿæ´»å¹³è¡¡è¢«æ‰“ç ´ï¼Œå¥åº·æˆ–å®¶åº­çº¢ç¯ï¼Œéœ€é‡æ–°è¯„ä¼°å·¥ä½œå¼ºåº¦ã€‚';
        if (dimScores[4] < 8) actionText += 'å¤–éƒ¨æ¨åŠ›å¤§ï¼ˆå¸‚åœºå·®/æ— å‰¯ä¸šï¼‰ï¼Œè·³æ§½éœ€æ›´è°¨æ…ï¼Œä½†å¯æå‰å‡†å¤‡ã€‚';
        if (dimScores[4] > 20) actionText += 'å¤–éƒ¨æŸç¼šå°ï¼Œå®¶åº­æ”¯æŒä¸”å¸‚åœºç«äº‰åŠ›å¼ºï¼Œä½ æ‹¥æœ‰æ›´å¤šä¸»åŠ¨æƒã€‚';
        if (actionText === 'ğŸ ç»¼åˆå»ºè®®ï¼š') actionText = 'ğŸ å„ç»´åº¦ç›¸å¯¹å‡è¡¡ï¼Œè¯·æ ¹æ®æ€»åˆ†åŒºé—´é‡‡å–å¯¹åº”ç­–ç•¥ã€‚';

        deepHtml += `<div class="action-footnote">${actionText}</div>`;
        deepHtml += `<div class="footnote-meta">ğŸ” åå‘é¢˜å¾—åˆ†å·²è‡ªåŠ¨è½¬æ¢ï¼šåŸå§‹åˆ†è¶Šä½ä»£è¡¨å¯¹ç•™å­˜è¶Šæœ‰åˆ©ã€‚ä¼˜åŠ¿/é£é™©åŸºäºè½¬æ¢ååˆ†å€¼åˆ¤æ–­ã€‚</div>`;

        document.getElementById('resultDeep').innerHTML = deepHtml;
        document.getElementById('resultDeep').style.display = 'block';

        // æ»šåŠ¨åˆ°ç»“æœ
        document.getElementById('resultDeep').scrollIntoView({ behavior: 'smooth', block: 'start' });
    }

    window.onload = function() {
        renderQuestionnaire();

        document.getElementById('calculateBtn').addEventListener('click', generateDeepReport);
        document.getElementById('clearBtn').addEventListener('click', clearAll);

        // é€‰é¡¹æ”¹å˜æ—¶ç§»é™¤é«˜äº®
        document.addEventListener('change', function(e) {
            if (e.target && e.target.type === 'radio') {
                const group = e.target.closest('.q-options');
                if (group) group.style.backgroundColor = 'transparent';
            }
        });
    };
})();
</script>
</body>
</html>